<!doctype html><html lang=en dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>The Devops Rough cli / Bash Guide | Another Software Engineering Blog</title><meta name=keywords content="DevOps,Bash,Linux,Emojis"><meta name=description content="Useful bash commands for DevOps"><meta name=author content="Eric Arellano"><link rel=canonical href=https://blog.ericarellano.tech/posts/linux_bash/><link crossorigin=anonymous href=/assets/css/stylesheet.da3211e5ef867bf2b75fd5a6515cfed7195c011e8ab735694e203810a827097b.css integrity="sha256-2jIR5e+Ge/K3X9WmUVz+1xlcAR6KtzVpTiA4EKgnCXs=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.ericarellano.tech/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.ericarellano.tech/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.ericarellano.tech/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.ericarellano.tech/apple-touch-icon.png><link rel=mask-icon href=https://blog.ericarellano.tech/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://blog.ericarellano.tech/posts/linux_bash/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><meta property="og:url" content="https://blog.ericarellano.tech/posts/linux_bash/"><meta property="og:site_name" content="Another Software Engineering Blog"><meta property="og:title" content="The Devops Rough cli / Bash Guide"><meta property="og:description" content="Useful bash commands for DevOps"><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-07-24T00:00:00-07:00"><meta property="article:modified_time" content="2021-07-24T00:00:00-07:00"><meta property="article:tag" content="DevOps"><meta property="article:tag" content="Bash"><meta property="article:tag" content="Linux"><meta property="article:tag" content="Emojis"><meta name=twitter:card content="summary"><meta name=twitter:title content="The Devops Rough cli / Bash Guide"><meta name=twitter:description content="Useful bash commands for DevOps"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"All Posts","item":"https://blog.ericarellano.tech/posts/"},{"@type":"ListItem","position":2,"name":"The Devops Rough cli / Bash Guide","item":"https://blog.ericarellano.tech/posts/linux_bash/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"The Devops Rough cli / Bash Guide","name":"The Devops Rough cli \/ Bash Guide","description":"Useful bash commands for DevOps","keywords":["DevOps","Bash","Linux","Emojis"],"articleBody":"Useful Bash commands for DevOps work So Bash is no longer the hottest ticket on the market. Happens. I may have seen the actual point where this peaked and let me tell you, that’s something. Still, there’s some cool stuff to be done with Bash.\nFor example, if you are writing a quick and dirty Terraform configuration, you can get really far with TF templates, HCL interpolation and well placed Bash commands:\n[Terraform Bash template for Jitsi installation](https://github. com/edamsoft-sre/jitsi-azure-terraform/blob/trunk/environments/prod/templates /setup.tpl)\n1. iterm2 or csshX The best terminal software will practically do your job for you. Just install, sit back and cash in. If you don’t know what either is, try iterm2 first. If you can find csshX and install it, then all your problems will be solved.\nYou will have new ones, for sure. but the old ones, gone. Using multiple windows efficiently is almost better than actually automating anything. It can be lot’s of fun, and also very dangerous.\niterm Shortcuts Ctrl-shift-i - Send output to all windows AND tabs (watch out!) Ctrl-D - Open a window to the right Ctrl-Shift-D - Open a window below Ctrl-Shift-Return - toggle current window full screen (fill iterm2 window) If you need or WANT to have dozens of servers open and send commands to different sub groups, and, and, and….\nGet csshX !!! Then, relax and eat some ramen 2. top The Linux top command is pretty well documented.\nI like to type “zbx” when I start it, and then capital I and 1 to check the number of cpus/cores.\nThis doesn’t do much, but it looks nice.\noptions - *x*: enable bold for current sort_by column - *z*: enable color - *Z*: edit colors - *I*: Irix mode - detects single cpu - *b*: toggle solid column/row highlight background - *k*: kill pid - *m*: memory ( I think, check the man page) - *l*: *load* haha but really, just type *uptime* 3. find Find the largest directories or files in a tree\nfind . -type d -print0 | xargs -0 du -s | sort -n | tail -15 | cut -f2 | xargs -I{} du -sh {} Xargs allows us to pass multiple arguments to a command like Python map, so the disk usage du command receives each subsequent file result from find and gets its size. Then we do some table transformation, basically, and re-run the results through xargs and du to generate a final listing that is sorted across all results.\nRun a command on the findings Another way to find files or directories and execute on command with them is the explicit -exec switch.\nfind . -mtime 0 -exec stat '{}' \\; 4. capture whole packets tcpdump -n -A -q -w /tmp/packet.cap Capturing packets is a lot of fun, if you’re an evil hacker. Otherwise it’s a huge pain in the ass. Most likely, you kids will be looking at packet statistics aggregated in a nice GUI like Grafana, Kibana, or not at all thanks to advances in the software industry. You’re welcome.\nnc -v -u google.org 5060 read captures in CLI\ntcpdump -r | less 5. ssh and scp scp -o 'ProxyJump user@bastion' -i key user@host:/path/to/remote/file /local/path/file You should always be using secure shell with strong RSA keys and a good key management system.\nOther than that, use your ~/.ssh/config file to set some sensible defaults\nHost * UseKeyChain yes AddKeysToAgent yes IdentityFile ~/.ssh/id_rsa_private_keyfile Add ssh keys to the macOS agent, if that’s your OS. If not, it won’t work. Well, it should but who knows what the Ubuntu or RedHat options are. Who cares?\nssh-add -l ssh-add ~/path/to/my/key ssh-add -l Use a passphrase on your keys. Why not.\n6. Awk and sed and cut Learn them well, you can really go down a rabbithole with these tools. Through probably the late 90’s they were best in class. But you still have thousands of websites and production platforms relying on a well placed Awk or Sed, trust me.\nUse sed to replace text with regex\nSed allows simple regular expression matching which is what you’re going to have to do to fix your mistakes. All of them.\nsed -i \"s/component_secret =.*/component_secret = \\\"$JICOFO_SECRET\\\"/\" $PROSODY_HOST_CONF sed -i \"s#some_text/next_one#next_one#g\" $INPUT_FILE On Ubuntu Hirsute 21.04 get a list of only IPv4 addresses. Can be done in better ways, probably, but you get the jist.\nip -4 addr | awk '{ print $2 }' | sed 's#/.*##' | sed \"s#^[^0-9].*##\" | sed '/^$/d' | sed 1d Awk is a full programming language, but we can use it to get text fields or csv columns from text. sed regular expression replace with the ’s/old/new/g’ command and global switches Regex ‘[^0-9].*’ match starts with a non-digit sed Delete the first line, which is localhost, and Delete empty lines Use a pound “#” separator if you need to match a “/” forward slash., 7. While and For Loops These are also useful. You can make a list of numbers like {1..100}. This is where you realize Bash really IS a programming language. Imagine that! for i in {1..100}; do echo \"Some interesting thing one hundred times with an index: $i\"; done content = \"content coming soon\" for i in More do if [ $RANDOM -le 7000 ] then echo \"$i groovy $content\" else echo \"$i questionable $content\" fi done Ultimately, you will not use very much Bash scripting, unless you want to. But you can get really far, accessing Databases and stuff. Thought you should know.\n8. Let us know your favorite commands! read feedback; echo $feedback \u003e /dev/null ","wordCount":"928","inLanguage":"en","datePublished":"2021-07-24T00:00:00-07:00","dateModified":"2021-07-24T00:00:00-07:00","author":{"@type":"Person","name":"Eric Arellano"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.ericarellano.tech/posts/linux_bash/"},"publisher":{"@type":"Organization","name":"Another Software Engineering Blog","logo":{"@type":"ImageObject","url":"https://blog.ericarellano.tech/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://blog.ericarellano.tech/ accesskey=h title="Another Software Engineering Blog (Alt + H)">Another Software Engineering Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.ericarellano.tech/posts title=Posts><span>Posts</span></a></li><li><a href=https://blog.ericarellano.tech/about title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">The Devops Rough cli / Bash Guide</h1><div class=post-description>Useful bash commands for DevOps</div><div class=post-meta><span title='2021-07-24 00:00:00 -0700 PDT'>July 24, 2021</span>&nbsp;·&nbsp;<span>Eric Arellano</span></div></header><div class=post-content><h2 id=useful-bash-commands-for-devops-work----hahahugoshortcode14s0hbhb>Useful Bash commands for DevOps work
<img src=https://github.githubassets.com/images/icons/emoji/unicode/1f9f0.png?v8 alt=:toolbox: class=emoji style=height:1em;vertical-align:text-bottom></h2><p>So Bash is no longer the hottest ticket on the market. Happens. I may have seen the actual point where this peaked
and let me tell you, that&rsquo;s something. Still, there&rsquo;s some cool stuff to be done with Bash.</p><p>For example, if you are writing a quick and dirty Terraform configuration, you can get really far with TF templates,
HCL interpolation and well placed Bash commands:</p><p>[Terraform Bash template for Jitsi installation](https://github.
com/edamsoft-sre/jitsi-azure-terraform/blob/trunk/environments/prod/templates
/setup.tpl)</p><h3 id=1--iterm2-or-csshx--hahahugoshortcode14s1hbhb>1. iterm2 or csshX
<img src=https://github.githubassets.com/images/icons/emoji/unicode/1f4fa.png?v8 alt=:tv: class=emoji style=height:1em;vertical-align:text-bottom></h3><p>The best terminal software will practically do your job for you. Just install, sit back and cash in. If you don&rsquo;t
know what either is, try iterm2 first. If you can find csshX and install it, then all your problems will be solved.<br>You will have new ones, for sure.
<img src=https://github.githubassets.com/images/icons/emoji/unicode/1f40a.png?v8 alt=:crocodile: class=emoji style=height:1em;vertical-align:text-bottom>
but the old ones, gone. Using multiple windows efficiently is almost
better than actually automating anything. It can be lot&rsquo;s of fun, and also very dangerous.</p><h6 id=iterm-shortcuts-hahahugoshortcode14s3hbhb>iterm Shortcuts
<img src=https://github.githubassets.com/images/icons/emoji/unicode/1f335.png?v8 alt=:cactus: class=emoji style=height:1em;vertical-align:text-bottom></h6><pre><code>Ctrl-shift-i - Send output to all windows AND tabs (watch out!)
Ctrl-D - Open a window to the right
Ctrl-Shift-D - Open a window below
Ctrl-Shift-Return - toggle current window full screen (fill iterm2 window)
</code></pre><p><em>If you need or WANT to have dozens of servers open and send commands to different sub groups, and, and, and&mldr;.</em></p><p><a href=https://formulae.brew.sh/formula/csshx>Get csshX</a> !!! Then, relax and eat some ramen
<img src=https://github.githubassets.com/images/icons/emoji/unicode/1f35c.png?v8 alt=:ramen: class=emoji style=height:1em;vertical-align:text-bottom></p><hr><h4 id=2-top---hahahugoshortcode14s5hbhb>2. top
<img src=https://github.githubassets.com/images/icons/emoji/unicode/1f52e.png?v8 alt=:crystal_ball: class=emoji style=height:1em;vertical-align:text-bottom></h4><p>The Linux <em>top</em> command is pretty well documented.</p><p>I like to type &ldquo;zbx&rdquo; when I start it, and then capital <em>I</em> and <em>1</em> to check the number of cpus/cores.</p><p>This doesn&rsquo;t do much, but it looks nice.</p><hr><h6 id=options>options<a hidden class=anchor aria-hidden=true href=#options>#</a></h6><pre><code>-  *x*:    enable bold for current sort_by column
-  *z*:     enable color
-  *Z*:     edit colors
-  *I*:     Irix mode - detects single cpu
-  *b*:     toggle solid column/row highlight background
-  *k*:     kill pid
-  *m*:     memory ( I think, check the man page)
-  *l*:     *load* haha but really, just type *uptime*
</code></pre><hr><h3 id=3-find>3. find<a hidden class=anchor aria-hidden=true href=#3-find>#</a></h3><p>Find the largest directories or files in a tree</p><pre><code>find . -type d -print0 | xargs -0 du -s | sort -n | tail -15 | cut -f2 | xargs -I{} du -sh {}
</code></pre><p>Xargs allows us to pass multiple arguments to a command like Python <em>map</em>, so the disk usage <em>du</em> command receives
each subsequent file result from find and gets its size. Then we do some table transformation, basically, and re-run
the results through <em>xargs</em> and <em>du</em> to generate a final listing that is sorted across all results.</p><hr><h3 id=run-a-command-on-the-findings>Run a command on the findings<a hidden class=anchor aria-hidden=true href=#run-a-command-on-the-findings>#</a></h3><p>Another way to find files or directories and execute on command with them is the explicit <em>-exec</em> switch.</p><pre><code>find . -mtime 0 -exec stat '{}' \;
</code></pre><hr><h3 id=4-capture-whole-packets>4. capture whole packets<a hidden class=anchor aria-hidden=true href=#4-capture-whole-packets>#</a></h3><pre><code>tcpdump -n -A -q -w /tmp/packet.cap &lt;some filter&gt;
</code></pre><p>Capturing packets is a lot of fun, if you&rsquo;re an evil hacker. Otherwise it&rsquo;s a huge pain in the ass. Most likely, you
kids will be looking at packet statistics aggregated in a nice GUI like Grafana, Kibana, or not at all thanks to
advances in the software industry. You&rsquo;re welcome.</p><pre><code>nc -v -u google.org 5060
</code></pre><p>read captures in CLI</p><pre><code>tcpdump -r | less
</code></pre><hr><h3 id=5-ssh-and-scp>5. ssh and scp<a hidden class=anchor aria-hidden=true href=#5-ssh-and-scp>#</a></h3><pre><code>scp -o 'ProxyJump user@bastion' -i key user@host:/path/to/remote/file /local/path/file
</code></pre><p>You should always be using secure shell with strong RSA keys and a good key management system.</p><p>Other than that, use your ~/.ssh/config file to set some sensible defaults</p><pre><code>Host *
   UseKeyChain yes
   AddKeysToAgent yes
   IdentityFile ~/.ssh/id_rsa_private_keyfile 
</code></pre><p>Add ssh keys to the macOS agent, if that&rsquo;s your OS. If not, it won&rsquo;t work. Well, it should but who knows what the
Ubuntu or RedHat options are. Who cares?</p><pre><code> ssh-add -l
 ssh-add ~/path/to/my/key
 ssh-add -l
</code></pre><p><img src=https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png?v8 alt=:bulb: class=emoji style=height:1em;vertical-align:text-bottom>
Use a passphrase on your keys. Why not.</p><hr><h3 id=6-awk-and-sed-and-cut>6. Awk and sed and cut<a hidden class=anchor aria-hidden=true href=#6-awk-and-sed-and-cut>#</a></h3><p>Learn them well, you can really go down a rabbithole with these tools. Through probably the late 90&rsquo;s they were best
in class. But you still have thousands of websites and production platforms relying on a well placed Awk or Sed,
trust me.</p><p><img src=https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png?v8 alt=:bulb: class=emoji style=height:1em;vertical-align:text-bottom>
Use <em>sed</em> to replace text with regex</p><p>Sed allows simple regular expression matching which is what you&rsquo;re going to have to do to fix your mistakes. All of them.</p><pre><code>sed -i &quot;s/component_secret =.*/component_secret = \&quot;$JICOFO_SECRET\&quot;/&quot; $PROSODY_HOST_CONF

sed -i &quot;s#some_text/next_one#next_one#g&quot; $INPUT_FILE
</code></pre><p>On Ubuntu Hirsute 21.04 get a list of only IPv4 addresses. Can be done in better ways, probably, but you get the jist.</p><pre><code>   ip -4 addr | awk '{ print $2 }' | sed 's#/.*##' | sed &quot;s#^[^0-9].*##&quot; | sed '/^$/d' | sed 1d
</code></pre><ul><li>Awk is a full programming language, but we can use it to get text fields or csv columns from text.</li><li><em>sed</em> regular expression replace with the &rsquo;s/old/new/g&rsquo; command and global switches</li><li>Regex &lsquo;[^0-9].*&rsquo; match starts with a non-digit</li><li>sed Delete the first line, which is localhost, and Delete empty lines</li><li>Use a pound &ldquo;#&rdquo; separator if you need to match a &ldquo;/&rdquo; forward slash.,</li></ul><hr><h3 id=7--while-and-for-loops>7. While and For Loops<a hidden class=anchor aria-hidden=true href=#7--while-and-for-loops>#</a></h3><p>These are also useful. You can make a list of numbers like {1..100}. This is where you realize Bash really IS a
programming language. Imagine that!
<img src=https://github.githubassets.com/images/icons/emoji/unicode/1f513.png?v8 alt=:unlock: class=emoji style=height:1em;vertical-align:text-bottom></p><pre><code>for i in {1..100};
   do echo &quot;Some interesting thing one hundred times with an index: $i&quot;;
done

content = &quot;content coming soon&quot;

for i in More
    do 
        if [ $RANDOM -le 7000 ]
            then echo &quot;$i groovy $content&quot;
        else echo &quot;$i questionable $content&quot; 
        fi
    done
</code></pre><p>Ultimately, you will not use very much Bash scripting, unless you want to. But you can get really far, accessing
Databases and stuff. Thought you should know.</p><hr><h3 id=8-let-us-know-your-favorite-commands>8. Let us know your favorite commands!<a hidden class=anchor aria-hidden=true href=#8-let-us-know-your-favorite-commands>#</a></h3><pre><code>  read feedback;
  echo $feedback &gt; /dev/null
</code></pre><img src=https://github.githubassets.com/images/icons/emoji/unicode/23f8.png?v8 alt=:pause_button: class=emoji style=height:1em;vertical-align:text-bottom></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.ericarellano.tech/tags/devops/>DevOps</a></li><li><a href=https://blog.ericarellano.tech/tags/bash/>Bash</a></li><li><a href=https://blog.ericarellano.tech/tags/linux/>Linux</a></li><li><a href=https://blog.ericarellano.tech/tags/emojis/>Emojis</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2026 <a href=https://blog.ericarellano.tech/>Another Software Engineering Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script></body></html>