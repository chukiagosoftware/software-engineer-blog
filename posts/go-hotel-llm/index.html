<!doctype html><html lang=en dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Alpaca - Hotel Quality Recommendations | Another Software Engineering Blog</title><meta name=keywords content="Go,RAG,API,LLM,SQLite,Amadeus,DevOps"><meta name=description content="A Go microservice for analyzing hotel data, RAG engine and providing LLM-powered recommendations with RAG."><meta name=author content="Eric Arellano"><link rel=canonical href=https://ericarellano.tech/posts/go-hotel-llm/><link crossorigin=anonymous href=/assets/css/stylesheet.da3211e5ef867bf2b75fd5a6515cfed7195c011e8ab735694e203810a827097b.css integrity="sha256-2jIR5e+Ge/K3X9WmUVz+1xlcAR6KtzVpTiA4EKgnCXs=" rel="preload stylesheet" as=style><link rel=icon href=https://ericarellano.tech/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://ericarellano.tech/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://ericarellano.tech/favicon-32x32.png><link rel=apple-touch-icon href=https://ericarellano.tech/apple-touch-icon.png><link rel=mask-icon href=https://ericarellano.tech/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://ericarellano.tech/posts/go-hotel-llm/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><meta property="og:url" content="https://ericarellano.tech/posts/go-hotel-llm/"><meta property="og:site_name" content="Another Software Engineering Blog"><meta property="og:title" content="Alpaca - Hotel Quality Recommendations"><meta property="og:description" content="A Go microservice for analyzing hotel data, RAG engine and providing LLM-powered recommendations with RAG."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2026-02-21T00:00:00-08:00"><meta property="article:modified_time" content="2026-02-21T00:00:00-08:00"><meta property="article:tag" content="Go"><meta property="article:tag" content="RAG"><meta property="article:tag" content="API"><meta property="article:tag" content="LLM"><meta property="article:tag" content="SQLite"><meta property="article:tag" content="Amadeus"><meta name=twitter:card content="summary"><meta name=twitter:title content="Alpaca - Hotel Quality Recommendations"><meta name=twitter:description content="A Go microservice for analyzing hotel data, RAG engine and providing LLM-powered recommendations with RAG."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"All Posts","item":"https://ericarellano.tech/posts/"},{"@type":"ListItem","position":2,"name":"Alpaca - Hotel Quality Recommendations","item":"https://ericarellano.tech/posts/go-hotel-llm/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Alpaca - Hotel Quality Recommendations","name":"Alpaca - Hotel Quality Recommendations","description":"A Go microservice for analyzing hotel data, RAG engine and providing LLM-powered recommendations with RAG.","keywords":["Go","RAG","API","LLM","SQLite","Amadeus","DevOps"],"articleBody":"A comprehensive Go microservice that fetches, consolidates, and analyzes hotel data from multiple sources.\nFeatures multi-source data aggregation, Retrieval Augmented Generation based recommendation engine with cutting edge LLMs.\nStatus: In active development.\nURL: Not yet public.\nArchitecture Alpaca is a microservice and utility suite that:\nFetches hotel data from multiple sources (Amadeus, Expedia, Tripadvisor, Google, Booking.com) Consolidates hotel data into a unified schema Crawls reviews from multiple sources (Tripadvisor, Google, Expedia, Booking, hotel websites, etc.) Vectorizes reviews and hotel data into RAG capable vector database. Uses LLM (GPT-4, Claude, Grok) to analyze reviews for Quality and Quiet Generates intelligent recommendations based on review analysis Stores data in SQLite (default) with raw SQL Uses a generalized provider interface for easy API integration Processes data in concurrent batches with rate limiting Github Repo\nCurrent Project Structure Note this is a development stage service and will likely undergo changes.\nalpaca/ â”œâ”€â”€ alpaca/ â”‚ â”œâ”€â”€ main.go # Main entry point - hotel data worker â”‚ â”œâ”€â”€ generate_cities.go # City data generation utility (reference) â”‚ â”œâ”€â”€ generated_top_cities.go # Generated top cities data (reference) â”‚ â”œâ”€â”€ REVIEW_PROCESSING.md # Review processing documentation â”‚ â”œâ”€â”€ models/ â”‚ â”‚ â”œâ”€â”€ hotel.go # Original Amadeus hotel models â”‚ â”‚ â””â”€â”€ hotel_extended.go # Extended hotel models with recommendations â”‚ â”œâ”€â”€ services/ â”‚ â”‚ â”œâ”€â”€ hotel_service.go # Hotel business logic (Amadeus) â”‚ â”‚ â”œâ”€â”€ hotel_service_extended.go # Extended hotel service (multi-source) â”‚ â”‚ â”œâ”€â”€ review_crawler.go # Review crawling from multiple sources â”‚ â”‚ â”œâ”€â”€ llm_service.go # LLM integration (GPT-4, Claude, Grok) â”‚ â”‚ â””â”€â”€ recommendation_service.go # Recommendation orchestration â”‚ â”œâ”€â”€ database/ â”‚ â”‚ â””â”€â”€ database.go # SQLite database connection and schema â”‚ â””â”€â”€ utils/ â”‚ â””â”€â”€ constants.go # Constants and test data â”œâ”€â”€ go.mod # Go module definition â”œâ”€â”€ Dockerfile # Docker build configuration â””â”€â”€ README.md # This file Features âœ… Simplified Architecture Single Microservice: One focused service for hotel data collection Raw SQL: No ORM overhead, direct SQL control, ready for Redshift/Postgres SQLite First: Simple, file-based database (easy to migrate to Postgres/Redshift later) Generalized API Interface: Easy to add new hotel data providers âœ… Multi-Source Hotel Data Collection Amadeus API: Hotel list, search, and ratings data Expedia: Hotel listings and reviews (interface ready) Tripadvisor: Hotel data and reviews (interface ready) Google Places: Hotel data and reviews (interface ready) Booking.com: Hotel data and reviews (interface ready) Consolidated Schema: Unified hotel table with ratings from all sources âœ… Review Processing \u0026 LLM Analysis Multi-Source Review Crawling: Automatically fetches reviews from: Tripadvisor, Google, Expedia, Booking.com Hotel websites, Bing, Yelp Vector database will be used for fine-tuned models in iteration 2 LLM-Powered Analysis: Uses GPT-4, Claude, or Grok to analyze areviews Quality Detection: Identifies hotels with excellent service, cleanliness, amenities Quiet Detection: Identifies quiet, peaceful hotels away from noise Intelligent Recommendations: Combines quality and quiet analysis for recommendations Admin Override: Admin flag to enable/disable hotels regardless of analysis âœ… Advanced Processing Proper Pagination: Handles multi-page API responses automatically Concurrent Processing: Uses goroutines for parallel data fetching Rate Limiting: Respects API limits with configurable delays Error Handling: Graceful degradation and detailed error logging Invalid ID Tracking: Skips hotel IDs that consistently fail ðŸš€ Getting Started Prerequisites Go 1.23+ Amadeus API credentials (test or production) Environment Variables Create a .env file in the project root:\n# Amadeus API Credentials AMD=your_client_id AMS=your_client_secret # Optional: Override default API URLs AMADEUS_HOTEL_LIST_URL=https://test.api.amadeus.com/v1/reference-data/locations/hotels/by-city AMADEUS_HOTEL_SEARCH_URL=https://test.api.amadeus.com/v2/shopping/hotel-offers AMADEUS_HOTEL_RATINGS_URL=https://test.api.amadeus.com/v2/e-reputation/hotel-sentiments # Optional: Database path (defaults to ./alpaca.db) SQLITE_DB_PATH=./alpaca.db # Optional: Search radius configuration HOTEL_SEARCH_RADIUS=100 HOTEL_SEARCH_RADIUS_UNIT=MILE Running the Service go build -o alpaca ./alpaca/alpaca ./alpaca Or from the alpaca/alpaca directory:\ncd alpaca/alpaca go build -o alpaca ./alpaca The service will:\nConnect to SQLite database (creates if doesnâ€™t exist) Fetch hotel list for Austin, TX (default city) Fetch detailed search data for all hotels Fetch ratings data for test hotel IDs Database Schema The service uses a simple normalized schema with three main tables:\n-- Basic hotel information CREATE TABLE hotels ( id INTEGER PRIMARY KEY AUTOINCREMENT, hotel_id TEXT UNIQUE NOT NULL, type TEXT, chain_code TEXT, dupe_id INTEGER, name TEXT, iata_code TEXT, address TEXT, -- JSON stored as TEXT geo_code TEXT, -- JSON stored as TEXT distance TEXT, -- JSON stored as TEXT last_update TEXT, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ); -- Detailed hotel metadata CREATE TABLE hotel_search_data ( id INTEGER PRIMARY KEY AUTOINCREMENT, hotel_id TEXT UNIQUE NOT NULL, type TEXT, chain_code TEXT, dupe_id INTEGER, name TEXT, rating INTEGER, official_rating INTEGER, description TEXT, -- JSON stored as TEXT media TEXT, -- JSON stored as TEXT amenities TEXT, -- JSON stored as TEXT address TEXT, -- JSON stored as TEXT contact TEXT, -- JSON stored as TEXT policies TEXT, -- JSON stored as TEXT available INTEGER DEFAULT 0, offers TEXT, -- JSON stored as TEXT self TEXT, hotel_distance TEXT, -- JSON stored as TEXT last_update TEXT, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (hotel_id) REFERENCES hotels(hotel_id) ); -- Guest ratings and sentiment CREATE TABLE hotel_ratings_data ( id INTEGER PRIMARY KEY AUTOINCREMENT, hotel_id TEXT UNIQUE NOT NULL, type TEXT, number_of_reviews INTEGER, number_of_ratings INTEGER, overall_rating INTEGER, sentiments TEXT, -- JSON stored as TEXT last_update TEXT, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (hotel_id) REFERENCES hotels(hotel_id) ); -- Track invalid hotel IDs to skip in future runs CREATE TABLE invalid_hotel_search_ids ( id INTEGER PRIMARY KEY AUTOINCREMENT, hotel_id TEXT UNIQUE NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP ); API Provider Interface The service uses a generalized HotelAPIProvider interface, making it easy to add new hotel data sources:\ntype HotelAPIProvider interface { GetOAuthToken(ctx context.Context) (string, error) FetchHotelsList(ctx context.Context, cityCode string, token string) ([]models.HotelAPIItem, string, error) FetchHotelSearchData(ctx context.Context, hotelID string, token string) (*models.HotelSearchData, error) FetchHotelRatingsData(ctx context.Context, hotelID string, token string) (*models.HotelRatingsData, error) } Currently implemented:\nAmadeusProvider: Full Amadeus API integration Future providers can be added by implementing this interface.\nData Flow OAuth Token: Service authenticates with Amadeus API Hotel List: Fetches basic hotel data by city (with pagination) Hotel IDs: Extracts all hotel IDs for detailed processing Search Data: Concurrently fetches detailed hotel metadata (5 concurrent requests) Ratings Data: Concurrently fetches ratings and sentiment data (1 concurrent request for rate limiting) Performance Features Concurrent Processing: 5x faster data fetching with goroutines Rate Limiting: API-friendly request patterns (100-200ms delays) Pagination Handling: Efficient memory usage for large datasets Database Indexing: Optimized query performance Error Recovery: Graceful handling of API failures Invalid ID Tracking: Skips problematic hotel IDs automatically Review Processing See REVIEW_PROCESSING.md for detailed documentation on:\nReview crawling from multiple sources LLM analysis for Quality and Quiet detection Recommendation generation Usage examples Quick Start - Review Processing // Initialize services db, _ := database.NewDatabase() hotelService := services.NewHotelService(db) reviewCrawler := services.NewReviewCrawlerService(db) llmProvider := services.NewOpenAIProvider(os.Getenv(\"OPENAI_API_KEY\")) llmService := services.NewLLMService(llmProvider) recommendationService := services.NewRecommendationService( hotelService, reviewCrawler, llmService, ) // Process recommendations for a hotel err := recommendationService.ProcessHotelRecommendations(ctx, \"hotel-id\") Takeaways Database Backend Options SQLite (Current): Good for development and small datasets\nPros: Simple, no server needed, fast for reads Cons: Limited concurrency, not ideal for high write loads PostgreSQL: Recommended for production\nPros: Better concurrency, JSON support, full SQL features Cons: Requires server setup AWS Redshift: For analytics workloads\nPros: Columnar storage, optimized for analytics Cons: More complex setup, better for read-heavy analytics once data is standardized MongoDB: If we need future document flexibility and secondary storage\nPros: Native JSON, flexible schema Cons: Different query model, may need to rethink relationships Recommendation: Start with SQLite for development, migrate to PostgreSQL for production. The raw SQL approach makes migration straightforward.\nCode Simplification ToDo Struct Simplification:\nConsider flattening some nested JSON structures Remove unused fields from API responses Create separate structs for database vs API models Database Code:\nAdd connection pooling configuration Implement prepared statements for better performance Add transaction support for batch operations Error Handling:\nCreate custom error types for better error handling Add retry logic with exponential backoff Implement circuit breaker pattern for API calls Configuration:\nMove hardcoded values to config file Implement feature flags Add validation for environment variables Support multiple city codes with Geolocation Testing:\nAdd unit tests for database operations Add integration tests for API provider, LLM and Vectors Mock external API calls for testing Development Building go build -o alpaca ./alpaca/alpaca Running Tests go test ./... Code Style The project follows standard Go conventions:\nUse gofmt for formatting Use golint for linting Follow Go naming conventions License MIT\n","wordCount":"1365","inLanguage":"en","datePublished":"2026-02-21T00:00:00-08:00","dateModified":"2026-02-21T00:00:00-08:00","author":{"@type":"Person","name":"Eric Arellano"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://ericarellano.tech/posts/go-hotel-llm/"},"publisher":{"@type":"Organization","name":"Another Software Engineering Blog","logo":{"@type":"ImageObject","url":"https://ericarellano.tech/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://ericarellano.tech/ accesskey=h title="Another Software Engineering Blog (Alt + H)">Another Software Engineering Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://ericarellano.tech/posts title=Posts><span>Posts</span></a></li><li><a href=https://ericarellano.tech/about title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Alpaca - Hotel Quality Recommendations</h1><div class=post-description>A Go microservice for analyzing hotel data, RAG engine and providing LLM-powered recommendations with RAG.</div><div class=post-meta><span title='2026-02-21 00:00:00 -0800 PST'>February 21, 2026</span>&nbsp;Â·&nbsp;<span>Eric Arellano</span></div></header><div class=post-content><p>A comprehensive Go microservice that fetches, consolidates, and analyzes hotel data from multiple sources.</p><p>Features multi-source data aggregation, Retrieval Augmented Generation based recommendation engine with cutting edge LLMs.</p><p>Status: In active development.</p><p>URL: Not yet public.</p><h2 id=architecture>Architecture<a hidden class=anchor aria-hidden=true href=#architecture>#</a></h2><p>Alpaca is a microservice and utility suite that:</p><ul><li>Fetches hotel data from multiple sources (Amadeus, Expedia, Tripadvisor, Google, Booking.com)</li><li>Consolidates hotel data into a unified schema</li><li>Crawls reviews from multiple sources (Tripadvisor, Google, Expedia, Booking, hotel websites, etc.)</li><li>Vectorizes reviews and hotel data into RAG capable vector database.</li><li>Uses LLM (GPT-4, Claude, Grok) to analyze reviews for Quality and Quiet</li><li>Generates intelligent recommendations based on review analysis</li><li>Stores data in SQLite (default) with raw SQL</li><li>Uses a generalized provider interface for easy API integration</li><li>Processes data in concurrent batches with rate limiting</li></ul><p><a href=https://github.com/chukiagosoftware/alpaca>Github Repo</a></p><h2 id=current-project-structure>Current Project Structure<a hidden class=anchor aria-hidden=true href=#current-project-structure>#</a></h2><p>Note this is a development stage service and will likely undergo changes.</p><pre tabindex=0><code>alpaca/
â”œâ”€â”€ alpaca/
â”‚   â”œâ”€â”€ main.go                    # Main entry point - hotel data worker
â”‚   â”œâ”€â”€ generate_cities.go         # City data generation utility (reference)
â”‚   â”œâ”€â”€ generated_top_cities.go    # Generated top cities data (reference)
â”‚   â”œâ”€â”€ REVIEW_PROCESSING.md       # Review processing documentation
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ hotel.go              # Original Amadeus hotel models
â”‚   â”‚   â””â”€â”€ hotel_extended.go     # Extended hotel models with recommendations
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ hotel_service.go      # Hotel business logic (Amadeus)
â”‚   â”‚   â”œâ”€â”€ hotel_service_extended.go  # Extended hotel service (multi-source)
â”‚   â”‚   â”œâ”€â”€ review_crawler.go     # Review crawling from multiple sources
â”‚   â”‚   â”œâ”€â”€ llm_service.go        # LLM integration (GPT-4, Claude, Grok)
â”‚   â”‚   â””â”€â”€ recommendation_service.go  # Recommendation orchestration
â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â””â”€â”€ database.go           # SQLite database connection and schema
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ constants.go          # Constants and test data
â”œâ”€â”€ go.mod                    # Go module definition
â”œâ”€â”€ Dockerfile               # Docker build configuration
â””â”€â”€ README.md                # This file
</code></pre><h2 id=features>Features<a hidden class=anchor aria-hidden=true href=#features>#</a></h2><h3 id=-simplified-architecture>âœ… Simplified Architecture<a hidden class=anchor aria-hidden=true href=#-simplified-architecture>#</a></h3><ul><li><strong>Single Microservice</strong>: One focused service for hotel data collection</li><li><strong>Raw SQL</strong>: No ORM overhead, direct SQL control, ready for Redshift/Postgres</li><li><strong>SQLite First</strong>: Simple, file-based database (easy to migrate to Postgres/Redshift later)</li><li><strong>Generalized API Interface</strong>: Easy to add new hotel data providers</li></ul><h3 id=-multi-source-hotel-data-collection>âœ… Multi-Source Hotel Data Collection<a hidden class=anchor aria-hidden=true href=#-multi-source-hotel-data-collection>#</a></h3><ul><li><strong>Amadeus API</strong>: Hotel list, search, and ratings data</li><li><strong>Expedia</strong>: Hotel listings and reviews (interface ready)</li><li><strong>Tripadvisor</strong>: Hotel data and reviews (interface ready)</li><li><strong>Google Places</strong>: Hotel data and reviews (interface ready)</li><li><strong>Booking.com</strong>: Hotel data and reviews (interface ready)</li><li><strong>Consolidated Schema</strong>: Unified hotel table with ratings from all sources</li></ul><h3 id=-review-processing--llm-analysis>âœ… Review Processing & LLM Analysis<a hidden class=anchor aria-hidden=true href=#-review-processing--llm-analysis>#</a></h3><ul><li><strong>Multi-Source Review Crawling</strong>: Automatically fetches reviews from:<ul><li>Tripadvisor, Google, Expedia, Booking.com</li><li>Hotel websites, Bing, Yelp</li></ul></li><li>Vector database will be used for fine-tuned models in iteration 2</li><li><strong>LLM-Powered Analysis</strong>: Uses GPT-4, Claude, or Grok to analyze areviews</li><li><strong>Quality Detection</strong>: Identifies hotels with excellent service, cleanliness, amenities</li><li><strong>Quiet Detection</strong>: Identifies quiet, peaceful hotels away from noise</li><li><strong>Intelligent Recommendations</strong>: Combines quality and quiet analysis for recommendations</li><li><strong>Admin Override</strong>: Admin flag to enable/disable hotels regardless of analysis</li></ul><h3 id=-advanced-processing>âœ… Advanced Processing<a hidden class=anchor aria-hidden=true href=#-advanced-processing>#</a></h3><ul><li><strong>Proper Pagination</strong>: Handles multi-page API responses automatically</li><li><strong>Concurrent Processing</strong>: Uses goroutines for parallel data fetching</li><li><strong>Rate Limiting</strong>: Respects API limits with configurable delays</li><li><strong>Error Handling</strong>: Graceful degradation and detailed error logging</li><li><strong>Invalid ID Tracking</strong>: Skips hotel IDs that consistently fail</li></ul><h2 id=-getting-started>ðŸš€ Getting Started<a hidden class=anchor aria-hidden=true href=#-getting-started>#</a></h2><h3 id=prerequisites>Prerequisites<a hidden class=anchor aria-hidden=true href=#prerequisites>#</a></h3><ul><li>Go 1.23+</li><li>Amadeus API credentials (test or production)</li></ul><h3 id=environment-variables>Environment Variables<a hidden class=anchor aria-hidden=true href=#environment-variables>#</a></h3><p>Create a <code>.env</code> file in the project root:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Amadeus API Credentials</span>
</span></span><span style=display:flex><span>AMD<span style=color:#f92672>=</span>your_client_id
</span></span><span style=display:flex><span>AMS<span style=color:#f92672>=</span>your_client_secret
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Optional: Override default API URLs</span>
</span></span><span style=display:flex><span>AMADEUS_HOTEL_LIST_URL<span style=color:#f92672>=</span>https://test.api.amadeus.com/v1/reference-data/locations/hotels/by-city
</span></span><span style=display:flex><span>AMADEUS_HOTEL_SEARCH_URL<span style=color:#f92672>=</span>https://test.api.amadeus.com/v2/shopping/hotel-offers
</span></span><span style=display:flex><span>AMADEUS_HOTEL_RATINGS_URL<span style=color:#f92672>=</span>https://test.api.amadeus.com/v2/e-reputation/hotel-sentiments
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Optional: Database path (defaults to ./alpaca.db)</span>
</span></span><span style=display:flex><span>SQLITE_DB_PATH<span style=color:#f92672>=</span>./alpaca.db
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Optional: Search radius configuration</span>
</span></span><span style=display:flex><span>HOTEL_SEARCH_RADIUS<span style=color:#f92672>=</span><span style=color:#ae81ff>100</span>
</span></span><span style=display:flex><span>HOTEL_SEARCH_RADIUS_UNIT<span style=color:#f92672>=</span>MILE
</span></span></code></pre></div><h3 id=running-the-service>Running the Service<a hidden class=anchor aria-hidden=true href=#running-the-service>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>go build -o alpaca ./alpaca/alpaca
</span></span><span style=display:flex><span>./alpaca
</span></span></code></pre></div><p>Or from the alpaca/alpaca directory:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>cd alpaca/alpaca
</span></span><span style=display:flex><span>go build -o alpaca
</span></span><span style=display:flex><span>./alpaca
</span></span></code></pre></div><p>The service will:</p><ol><li>Connect to SQLite database (creates if doesn&rsquo;t exist)</li><li>Fetch hotel list for Austin, TX (default city)</li><li>Fetch detailed search data for all hotels</li><li>Fetch ratings data for test hotel IDs</li></ol><h2 id=database-schema>Database Schema<a hidden class=anchor aria-hidden=true href=#database-schema>#</a></h2><p>The service uses a simple normalized schema with three main tables:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#75715e>-- Basic hotel information
</span></span></span><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> hotels (
</span></span><span style=display:flex><span>    id INTEGER <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span> AUTOINCREMENT,
</span></span><span style=display:flex><span>    hotel_id TEXT <span style=color:#66d9ef>UNIQUE</span> <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>type</span> TEXT,
</span></span><span style=display:flex><span>    chain_code TEXT,
</span></span><span style=display:flex><span>    dupe_id INTEGER,
</span></span><span style=display:flex><span>    name TEXT,
</span></span><span style=display:flex><span>    iata_code TEXT,
</span></span><span style=display:flex><span>    address TEXT,        <span style=color:#75715e>-- JSON stored as TEXT
</span></span></span><span style=display:flex><span>    geo_code TEXT,      <span style=color:#75715e>-- JSON stored as TEXT
</span></span></span><span style=display:flex><span>    distance TEXT,      <span style=color:#75715e>-- JSON stored as TEXT
</span></span></span><span style=display:flex><span>    last_update TEXT,
</span></span><span style=display:flex><span>    created_at DATETIME <span style=color:#66d9ef>DEFAULT</span> <span style=color:#66d9ef>CURRENT_TIMESTAMP</span>,
</span></span><span style=display:flex><span>    updated_at DATETIME <span style=color:#66d9ef>DEFAULT</span> <span style=color:#66d9ef>CURRENT_TIMESTAMP</span>
</span></span><span style=display:flex><span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- Detailed hotel metadata
</span></span></span><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> hotel_search_data (
</span></span><span style=display:flex><span>    id INTEGER <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span> AUTOINCREMENT,
</span></span><span style=display:flex><span>    hotel_id TEXT <span style=color:#66d9ef>UNIQUE</span> <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>type</span> TEXT,
</span></span><span style=display:flex><span>    chain_code TEXT,
</span></span><span style=display:flex><span>    dupe_id INTEGER,
</span></span><span style=display:flex><span>    name TEXT,
</span></span><span style=display:flex><span>    rating INTEGER,
</span></span><span style=display:flex><span>    official_rating INTEGER,
</span></span><span style=display:flex><span>    description TEXT,   <span style=color:#75715e>-- JSON stored as TEXT
</span></span></span><span style=display:flex><span>    media TEXT,         <span style=color:#75715e>-- JSON stored as TEXT
</span></span></span><span style=display:flex><span>    amenities TEXT,     <span style=color:#75715e>-- JSON stored as TEXT
</span></span></span><span style=display:flex><span>    address TEXT,      <span style=color:#75715e>-- JSON stored as TEXT
</span></span></span><span style=display:flex><span>    contact TEXT,       <span style=color:#75715e>-- JSON stored as TEXT
</span></span></span><span style=display:flex><span>    policies TEXT,      <span style=color:#75715e>-- JSON stored as TEXT
</span></span></span><span style=display:flex><span>    available INTEGER <span style=color:#66d9ef>DEFAULT</span> <span style=color:#ae81ff>0</span>,
</span></span><span style=display:flex><span>    offers TEXT,        <span style=color:#75715e>-- JSON stored as TEXT
</span></span></span><span style=display:flex><span>    <span style=color:#66d9ef>self</span> TEXT,
</span></span><span style=display:flex><span>    hotel_distance TEXT, <span style=color:#75715e>-- JSON stored as TEXT
</span></span></span><span style=display:flex><span>    last_update TEXT,
</span></span><span style=display:flex><span>    created_at DATETIME <span style=color:#66d9ef>DEFAULT</span> <span style=color:#66d9ef>CURRENT_TIMESTAMP</span>,
</span></span><span style=display:flex><span>    updated_at DATETIME <span style=color:#66d9ef>DEFAULT</span> <span style=color:#66d9ef>CURRENT_TIMESTAMP</span>,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>FOREIGN</span> <span style=color:#66d9ef>KEY</span> (hotel_id) <span style=color:#66d9ef>REFERENCES</span> hotels(hotel_id)
</span></span><span style=display:flex><span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- Guest ratings and sentiment
</span></span></span><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> hotel_ratings_data (
</span></span><span style=display:flex><span>    id INTEGER <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span> AUTOINCREMENT,
</span></span><span style=display:flex><span>    hotel_id TEXT <span style=color:#66d9ef>UNIQUE</span> <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>type</span> TEXT,
</span></span><span style=display:flex><span>    number_of_reviews INTEGER,
</span></span><span style=display:flex><span>    number_of_ratings INTEGER,
</span></span><span style=display:flex><span>    overall_rating INTEGER,
</span></span><span style=display:flex><span>    sentiments TEXT,    <span style=color:#75715e>-- JSON stored as TEXT
</span></span></span><span style=display:flex><span>    last_update TEXT,
</span></span><span style=display:flex><span>    created_at DATETIME <span style=color:#66d9ef>DEFAULT</span> <span style=color:#66d9ef>CURRENT_TIMESTAMP</span>,
</span></span><span style=display:flex><span>    updated_at DATETIME <span style=color:#66d9ef>DEFAULT</span> <span style=color:#66d9ef>CURRENT_TIMESTAMP</span>,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>FOREIGN</span> <span style=color:#66d9ef>KEY</span> (hotel_id) <span style=color:#66d9ef>REFERENCES</span> hotels(hotel_id)
</span></span><span style=display:flex><span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- Track invalid hotel IDs to skip in future runs
</span></span></span><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> invalid_hotel_search_ids (
</span></span><span style=display:flex><span>    id INTEGER <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span> AUTOINCREMENT,
</span></span><span style=display:flex><span>    hotel_id TEXT <span style=color:#66d9ef>UNIQUE</span> <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>,
</span></span><span style=display:flex><span>    created_at DATETIME <span style=color:#66d9ef>DEFAULT</span> <span style=color:#66d9ef>CURRENT_TIMESTAMP</span>
</span></span><span style=display:flex><span>);
</span></span></code></pre></div><h2 id=api-provider-interface>API Provider Interface<a hidden class=anchor aria-hidden=true href=#api-provider-interface>#</a></h2><p>The service uses a generalized <code>HotelAPIProvider</code> interface, making it easy to add new hotel data sources:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>HotelAPIProvider</span> <span style=color:#66d9ef>interface</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>GetOAuthToken</span>(<span style=color:#a6e22e>ctx</span> <span style=color:#a6e22e>context</span>.<span style=color:#a6e22e>Context</span>) (<span style=color:#66d9ef>string</span>, <span style=color:#66d9ef>error</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>FetchHotelsList</span>(<span style=color:#a6e22e>ctx</span> <span style=color:#a6e22e>context</span>.<span style=color:#a6e22e>Context</span>, <span style=color:#a6e22e>cityCode</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>token</span> <span style=color:#66d9ef>string</span>) ([]<span style=color:#a6e22e>models</span>.<span style=color:#a6e22e>HotelAPIItem</span>, <span style=color:#66d9ef>string</span>, <span style=color:#66d9ef>error</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>FetchHotelSearchData</span>(<span style=color:#a6e22e>ctx</span> <span style=color:#a6e22e>context</span>.<span style=color:#a6e22e>Context</span>, <span style=color:#a6e22e>hotelID</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>token</span> <span style=color:#66d9ef>string</span>) (<span style=color:#f92672>*</span><span style=color:#a6e22e>models</span>.<span style=color:#a6e22e>HotelSearchData</span>, <span style=color:#66d9ef>error</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>FetchHotelRatingsData</span>(<span style=color:#a6e22e>ctx</span> <span style=color:#a6e22e>context</span>.<span style=color:#a6e22e>Context</span>, <span style=color:#a6e22e>hotelID</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>token</span> <span style=color:#66d9ef>string</span>) (<span style=color:#f92672>*</span><span style=color:#a6e22e>models</span>.<span style=color:#a6e22e>HotelRatingsData</span>, <span style=color:#66d9ef>error</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Currently implemented:</p><ul><li><code>AmadeusProvider</code>: Full Amadeus API integration</li></ul><p>Future providers can be added by implementing this interface.</p><h2 id=data-flow>Data Flow<a hidden class=anchor aria-hidden=true href=#data-flow>#</a></h2><ol><li><strong>OAuth Token</strong>: Service authenticates with Amadeus API</li><li><strong>Hotel List</strong>: Fetches basic hotel data by city (with pagination)</li><li><strong>Hotel IDs</strong>: Extracts all hotel IDs for detailed processing</li><li><strong>Search Data</strong>: Concurrently fetches detailed hotel metadata (5 concurrent requests)</li><li><strong>Ratings Data</strong>: Concurrently fetches ratings and sentiment data (1 concurrent request for rate limiting)</li></ol><h2 id=performance-features>Performance Features<a hidden class=anchor aria-hidden=true href=#performance-features>#</a></h2><ul><li><strong>Concurrent Processing</strong>: 5x faster data fetching with goroutines</li><li><strong>Rate Limiting</strong>: API-friendly request patterns (100-200ms delays)</li><li><strong>Pagination Handling</strong>: Efficient memory usage for large datasets</li><li><strong>Database Indexing</strong>: Optimized query performance</li><li><strong>Error Recovery</strong>: Graceful handling of API failures</li><li><strong>Invalid ID Tracking</strong>: Skips problematic hotel IDs automatically</li></ul><h2 id=review-processing>Review Processing<a hidden class=anchor aria-hidden=true href=#review-processing>#</a></h2><p>See <a href=alpaca/REVIEW_PROCESSING.md>REVIEW_PROCESSING.md</a> for detailed documentation on:</p><ul><li>Review crawling from multiple sources</li><li>LLM analysis for Quality and Quiet detection</li><li>Recommendation generation</li><li>Usage examples</li></ul><h3 id=quick-start---review-processing>Quick Start - Review Processing<a hidden class=anchor aria-hidden=true href=#quick-start---review-processing>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// Initialize services</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>db</span>, <span style=color:#a6e22e>_</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>database</span>.<span style=color:#a6e22e>NewDatabase</span>()
</span></span><span style=display:flex><span><span style=color:#a6e22e>hotelService</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>services</span>.<span style=color:#a6e22e>NewHotelService</span>(<span style=color:#a6e22e>db</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>reviewCrawler</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>services</span>.<span style=color:#a6e22e>NewReviewCrawlerService</span>(<span style=color:#a6e22e>db</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>llmProvider</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>services</span>.<span style=color:#a6e22e>NewOpenAIProvider</span>(<span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>Getenv</span>(<span style=color:#e6db74>&#34;OPENAI_API_KEY&#34;</span>))
</span></span><span style=display:flex><span><span style=color:#a6e22e>llmService</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>services</span>.<span style=color:#a6e22e>NewLLMService</span>(<span style=color:#a6e22e>llmProvider</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>recommendationService</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>services</span>.<span style=color:#a6e22e>NewRecommendationService</span>(
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>hotelService</span>, <span style=color:#a6e22e>reviewCrawler</span>, <span style=color:#a6e22e>llmService</span>,
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Process recommendations for a hotel</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>recommendationService</span>.<span style=color:#a6e22e>ProcessHotelRecommendations</span>(<span style=color:#a6e22e>ctx</span>, <span style=color:#e6db74>&#34;hotel-id&#34;</span>)
</span></span></code></pre></div><h2 id=takeaways>Takeaways<a hidden class=anchor aria-hidden=true href=#takeaways>#</a></h2><h3 id=database-backend-options>Database Backend Options<a hidden class=anchor aria-hidden=true href=#database-backend-options>#</a></h3><ol><li><p><strong>SQLite (Current)</strong>: Good for development and small datasets</p><ul><li>Pros: Simple, no server needed, fast for reads</li><li>Cons: Limited concurrency, not ideal for high write loads</li></ul></li><li><p><strong>PostgreSQL</strong>: Recommended for production</p><ul><li>Pros: Better concurrency, JSON support, full SQL features</li><li>Cons: Requires server setup</li></ul></li><li><p><strong>AWS Redshift</strong>: For analytics workloads</p><ul><li>Pros: Columnar storage, optimized for analytics</li><li>Cons: More complex setup, better for read-heavy analytics once data is standardized</li></ul></li><li><p><strong>MongoDB</strong>: If we need future document flexibility and secondary storage</p><ul><li>Pros: Native JSON, flexible schema</li><li>Cons: Different query model, may need to rethink relationships</li></ul></li></ol><p><strong>Recommendation</strong>: Start with SQLite for development, migrate to PostgreSQL for production. The raw SQL approach makes migration straightforward.</p><h3 id=code-simplification-todo>Code Simplification ToDo<a hidden class=anchor aria-hidden=true href=#code-simplification-todo>#</a></h3><ol><li><p><strong>Struct Simplification</strong>:</p><ul><li>Consider flattening some nested JSON structures</li><li>Remove unused fields from API responses</li><li>Create separate structs for database vs API models</li></ul></li><li><p><strong>Database Code</strong>:</p><ul><li>Add connection pooling configuration</li><li>Implement prepared statements for better performance</li><li>Add transaction support for batch operations</li></ul></li><li><p><strong>Error Handling</strong>:</p><ul><li>Create custom error types for better error handling</li><li>Add retry logic with exponential backoff</li><li>Implement circuit breaker pattern for API calls</li></ul></li><li><p><strong>Configuration</strong>:</p><ul><li>Move hardcoded values to config file</li><li>Implement feature flags</li><li>Add validation for environment variables</li><li>Support multiple city codes with Geolocation</li></ul></li><li><p><strong>Testing</strong>:</p><ul><li>Add unit tests for database operations</li><li>Add integration tests for API provider, LLM and Vectors</li><li>Mock external API calls for testing</li></ul></li></ol><h2 id=development>Development<a hidden class=anchor aria-hidden=true href=#development>#</a></h2><h3 id=building>Building<a hidden class=anchor aria-hidden=true href=#building>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>go build -o alpaca ./alpaca/alpaca
</span></span></code></pre></div><h3 id=running-tests>Running Tests<a hidden class=anchor aria-hidden=true href=#running-tests>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>go test ./...
</span></span></code></pre></div><h3 id=code-style>Code Style<a hidden class=anchor aria-hidden=true href=#code-style>#</a></h3><p>The project follows standard Go conventions:</p><ul><li>Use <code>gofmt</code> for formatting</li><li>Use <code>golint</code> for linting</li><li>Follow Go naming conventions</li></ul><h2 id=license>License<a hidden class=anchor aria-hidden=true href=#license>#</a></h2><p>MIT</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://ericarellano.tech/tags/go/>Go</a></li><li><a href=https://ericarellano.tech/tags/rag/>RAG</a></li><li><a href=https://ericarellano.tech/tags/api/>API</a></li><li><a href=https://ericarellano.tech/tags/llm/>LLM</a></li><li><a href=https://ericarellano.tech/tags/sqlite/>SQLite</a></li><li><a href=https://ericarellano.tech/tags/amadeus/>Amadeus</a></li><li><a href=https://ericarellano.tech/tags/devops/>DevOps</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2026 <a href=https://ericarellano.tech/>Another Software Engineering Blog</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script></body></html>